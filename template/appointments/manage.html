{% extends 'base.html' %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">📋 Gestion des rendez-vous</h1>

  <div class="mb-6">
    <a href="{% url 'appointments:create_appointment' %}"
       class="inline-block bg-blue-800 hover:bg-blue-900 text-white font-semibold px-5 py-2 rounded-lg shadow transition">
      + Créer un nouveau rendez-vous
    </a>
  </div>

  {% if appointments %}
    <div class="overflow-x-auto bg-white rounded-lg shadow">
      <table class="min-w-full table-auto border-collapse">
        <thead class="bg-gray-100 text-gray-700 text-sm uppercase">
          <tr>
            <th class="px-6 py-3 text-left">Étudiant</th>
            <th class="px-6 py-3 text-left">Instructeur</th>
            <th class="px-6 py-3 text-left">Date</th>
            <th class="px-6 py-3 text-left">Heure</th>
            <th class="px-6 py-3 text-left">Lieu</th>
            <th class="px-6 py-3 text-left">Statut</th>
            <th class="px-6 py-3 text-left">Actions</th>
          </tr>
        </thead>
        <tbody class="text-gray-700">
          {% for appointment in appointments %}
            <tr class="border-t hover:bg-gray-50 transition">
              <td class="px-6 py-4">{{ appointment.student.get_full_name|default:appointment.student.username }}</td>
              <td class="px-6 py-4">{{ appointment.instructor.get_full_name|default:appointment.instructor.username }}</td>
              <td class="px-6 py-4">{{ appointment.date }}</td>
              <td class="px-6 py-4">{{ appointment.time }}</td>
              <td class="px-6 py-4">{{ appointment.location }}</td>
              <td class="px-6 py-4">
                <span class="inline-block px-2 py-1 text-xs rounded bg-green-100 text-green-800">
                  {{ appointment.status }}
                </span>
              </td>
              <td class="px-6 py-4 space-x-2">
                  <a href="{% url 'appointments:edit_appointment' appointment.pk %}"
                     class="text-blue-600 hover:text-blue-800 font-medium">✏️ Modifier</a>
                  <a href="{% url 'appointments:delete_appointment' appointment.pk %}"
                     class="text-red-600 hover:text-red-800 font-medium">🗑️ Supprimer</a>
                </td>

          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-gray-600">Aucun rendez-vous trouvé.</p>
  {% endif %}
</div>
{% endblock %}
