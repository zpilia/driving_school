{% extends "base.html" %}

{% block title %}Fiche Étudiant{% endblock %}

{% block content %}
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold text-sky-600 mb-6">
      Fiche de l'étudiant : {{ student.first_name }} {{ student.last_name }}
    </h1>

    <section class="bg-white shadow-lg rounded-lg p-6 mb-6">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Informations de l'utilisateur</h2>
      <p><strong class="text-sky-600">Nom d'utilisateur :</strong> {{ student.username }}</p>
      <p><strong class="text-sky-600">Nom :</strong> {{ student.last_name }}</p>
      <p><strong class="text-sky-600">Prénom :</strong> {{ student.first_name }}</p>
      <p><strong class="text-sky-600">Email :</strong> {{ student.email }}</p>
      <p><strong class="text-sky-600">Inscrit le :</strong> {{ student.date_joined|date:"d/m/Y" }}</p>
    </section>

    <section class="bg-white shadow-lg rounded-lg p-6 mb-6">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Rendez-vous</h2>
      {% if appointments %}
        <ul class="list-disc pl-5 space-y-2">
          {% for app in appointments %}
            <li class="text-gray-700">{{ app.date }} à {{ app.time }} - {{ app.location }} (Instructeur : {{ app.instructor.username }})</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-600 italic">Aucun rendez-vous programmé.</p>
      {% endif %}
    </section>

    <section class="bg-white shadow-lg rounded-lg p-6 mb-6">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Forfait de cours</h2>
      {% if lesson_package %}
        <p><strong class="text-sky-600">Total :</strong> {{ lesson_package.total_hours }} heures</p>
        <p><strong class="text-orange-600">Utilisées :</strong> {{ lesson_package.used_hours }} heures</p>
        <p><strong class="text-green-600">Restantes :</strong> {{ lesson_package.remaining_hours }} heures</p>
        <p><strong class="text-red-600">À payer :</strong> {{ lesson_package.unpaid_hours }} heures</p>
      {% else %}
        <p class="text-gray-600 italic">Aucun forfait trouvé.</p>
      {% endif %}
    </section>

    <a href="{% url 'lessonpackages:add_hours' student.pk %}"
       class="inline-block bg-sky-400 text-white px-6 py-3 rounded-lg hover:bg-sky-600 transition-all ease-in-out mb-4">
      ➕ Ajouter des heures
    </a>
  </div>
{% endblock %}
