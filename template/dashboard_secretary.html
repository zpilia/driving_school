{% extends "base.html" %}
{% block title %}Tableau de bord Secrétaire{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

  {% if messages %}
    <div class="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;">
      {% for message in messages %}
        <div class="toast {{ message.tags }}"
             style="display: flex; align-items: center; background-color: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); min-width: 300px; max-width: 400px; font-size: 0.875rem; transition: opacity 0.4s ease;">
          <div style="flex: 1;">{{ message }}</div>
          <button onclick="this.parentElement.remove()"
                  style="margin-left: auto; background: none; border: none; color: #065f46; font-size: 1rem; padding: 0.25rem; cursor: pointer;">
            ×
          </button>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <h1 class="text-3xl font-bold text-blue-800 mb-8">
    Bienvenue, {{ user.get_full_name|default:user.username }} (Secrétaire)
  </h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <div class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">👤 Gérer les comptes Étudiants / Instructeurs</h2>
      <p class="text-gray-600 mb-4">Créer, modifier ou supprimer les comptes utilisateurs des étudiants et instructeurs.</p>
      <a href="{% url 'accounts:account_list' %}" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Gérer les comptes</a>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">📅 Planning général</h2>
      <p class="text-gray-600 mb-4">Consulter et gérer le planning global des rendez-vous.</p>
      <a href="{% url 'appointments:general_schedule' %}" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Voir le planning</a>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">⏱️ Ajouter des heures de cours</h2>
      <p class="text-gray-600 mb-4">Attribuer des heures supplémentaires aux forfaits des étudiants.</p>
      <a href="" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">Ajouter des heures</a>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
      <h2 class="text-xl font-semibold text-gray-800 mb-2">📋 Gérer les rendez-vous</h2>
      <p class="text-gray-600 mb-4">Ajouter, modifier ou supprimer les rendez-vous entre les élèves et les instructeurs.</p>
      <a href="{% url 'appointments:manage' %}" class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
        Accéder aux rendez-vous
      </a>
      <a href="{% url 'appointments:create_appointment' %}" class="ml-2 inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
        Nouveau rendez-vous
      </a>
    </div>

  </div>
</div>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".toast").forEach((toast) => {
      setTimeout(() => {
        toast.style.opacity = "0";
        setTimeout(() => toast.remove(), 500);
      }, 3000);
    });
  });
</script>
{% endblock %}
